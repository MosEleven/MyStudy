# 整洁代码

代码永存& Later equals never

1. 代码逻辑直接了当，缺陷不易隐藏
2. 减少依赖关系
3. 完善处理错误代码
4. 性能调优，防止他人乱调
5. 意图明显，考虑周到，职责简单，体现设计理念

# 命名

变量、函数、类名

1. 具有明确的含义，且能够与其他命名区分：insert，append代替add
2. 没有冗余的信息，比如表名不该带Table，变量名不该带Variable，去掉没用的修饰词
3. 可读，易搜索
4. 类名是名词，方法名是动词

# 函数

1. 函数应该短小精简，只做一件事（或者做的事都在同一抽象层级）
2. 向下规则，抽象层级向下扩展
3. 对于同样的一段switch语句，如果在多个地方都要判断这一个switch，应该将switch藏在**抽象工厂**里面，用抽象类和多态来代替重复的switch case
4. 参数最好少于两个，封装成对象或...args。尽量不要传入布尔值，因为这代表你的函数不止做一件事
5. 可以抽离出try/catch代码块，使用派生异常来代替枚举的异常码==？==
6. 消除重复是最重要的！！！

<u>注释要尽量精简，通过代码来体现意图。</u>

<u>纵向格式注重段落间的分割，横向格式注意每行的长度不要太长。</u>

# 对象和数据结构

1. 对象应暴露操作而隐藏数据，数据结构应暴露内部结构而不含任何操作

2. 过程式代码（使用数据结构的代码）便于在不改动既有数据结构的情况下添加新的函数，而面向对象则是在不改动既有函数的情况下添加新的类。==两方各有优势==，添加函数较多时用过程式代码更方便，添加类时则用面向对象。

3. 迪米特法则（ the law of Demeter），类C的方法f只应该调用一下对象的方法：

   - C
   - 由f创建的对象
   - 作为参数传递给f的对象
   - 由C的实体变量持有的对象

   而不应该调用由任何函数返回的对象的方法，即==不和陌生人说话==

4. 为什么不能混杂数据结构和对象==？==

# 错误处理

1. 使用异常而不是返回码，意思是判定出现问题的时候抛出异常，交由调用者处理，而不是直接返回某个约定的错误码，调用者根据错误码来处理。好处是抛出异常不会打乱代码结构，方便集中处理逻辑。
2. 使用可控异常（checked exception）会违背开闭原则，底层的函数修改，调用者的签名或异常处理需要更改
3. 打包一个第三方的API，并定义自己的异常类去处理抛出的异常。降低依赖，并隐藏第三方抛出的异常。
4. 使用特例模式来代替处理异常或返回特殊值。
5. 不要返回和传递NULL，除非设计成这样。

# 类

1. 单一职责原则，只有一个引起其改变的原因，就是说一个类只负责一个功能，只有负责的那个功能改变才需要改变这个类、
2. 其实就是拆分一个复杂的类，设定子类间的边界，开闭原则
3. 依赖倒置原则，依赖于抽象而不是具体实现细节。细节是会随时变化的，抽象出的基本内容是不太改变的